<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title th:text="${navName}"></title>
    <link type="text/css" rel="stylesheet" th:href="@{/assets/lib/iview/iview.css}">
    <link type="text/css" rel="stylesheet" th:href="@{/assets/css/common.css}">
    <link type="text/css" rel="stylesheet" th:href="@{/assets/css/index.css}">
</head>
<body>
<div v-cloak id="app">
    <section class="admin-layout-container">
        <div class="layout">
            <Layout>
                <Sider ref="sidebar" class="sidebar" hide-trigger collapsible width="260" :collapsed-width="80"
                       v-model="isCollapsed">
                    <div class="logo">
                        <div v-if="!isCollapsed" class="logo-saiqu">
                            <Avatar class="logo-avatar"
                                    shape="square" icon="ios-paper-plane"
                                    src="/assets/images/logo.png"></Avatar>
                            <span class="logo-text" th:text="${navName}"></span>
                        </div>
                        <Avatar v-else class="logo-avatar"
                                shape="square" icon="ios-paper-plane"
                                src="/assets/images/logo.png"/>
                    </div>
                    <i-menu
                            ref="side_menu"
                            theme="light"
                            width="260px"
                            :class="menuitemClasses"
                            v-if="!isCollapsed">
                        <template v-for="item in datas" :key="item.id">
                            <menu-item :name="item.name" @click.native="choosedMenu(item.id)">
                                <Icon :size="24" :type="item.icon"></Icon>
                                <span>{{item.name}}</span>
                            </menu-item>
                        </template>
                    </i-menu>
                    <div class="dropdown-wrap" v-if="isCollapsed">
                        <div class="dw-content">
                            <template v-for="item in datas" :key="item.id">
                                <Dropdown transfer placement="right-start"
                                          @on-click="choosedMenu(item.id)">
                                    <i-button class="dd-btn" type="text">
                                        <Icon :size="28" :type="item.icon"></Icon>
                                    </i-button>
                                    <dropdown-menu class="dd-menu" slot="list">
                                        <dropdown-item :name="item.name">
                                            <div class="ddi-wapper">
                                                <Icon :size="24" :type="item.icon"></Icon>
                                                <span class="ddi-text" v-text="item.name"></span>
                                            </div>
                                        </dropdown-item>
                                    </dropdown-menu>
                                </Dropdown>
                            </template>
                        </div>
                    </div>
                </Sider>
                <Layout :style="{marginLeft: !isCollapsed?'260px':'80px'}">
                    <i-header class="layout-header-bar">
                        <div class="header-wapper" style="height: 70px">
                            <div class="header-left">
                                <Icon @click.native="collapsedSider" :class="rotateIcon" type="md-menu"
                                      size="28"></Icon>
                                <i-input class="header-search"
                                         search
                                         placeholder="搜索..."
                                         v-model.trim="keywords"
                                         @on-search="loadTree"></i-input>
                            </div>
                            <div class="header-right">
                                <i-button icon="md-exit" @click="gotoAdmin" class="btn-blue" size="large">管理
                                </i-button>
                            </div>
                        </div>
                    </i-header>
                    <i-content class="main-content">
                        <Row v-for="item in datas" :id="item.id">
                            <i-col span="24" class="card-cat" icon="ios-home" v-text="item.name"></i-col>
                            <i-col span="6" v-for="child in item.children">
                                <Tooltip max-width="320"
                                         th:transfer="${isIe}"
                                         :content="child.tip"
                                         style="width:calc(100% - 10px)">
                                    <Card class="nav-card" @click.native="cardClickHandler(child)">
                                        <Row>
                                            <i-col style="width: 40px;">
                                                <Avatar v-if="child.icon.src"
                                                        class="card-avatar"
                                                        size="large"
                                                        :src="child.icon.src"></Avatar>
                                                <Avatar v-else
                                                        class="card-avatar"
                                                        size="large"
                                                        :style="{background: child.icon.color}">{{child.icon.text}}
                                                </Avatar>
                                            </i-col>
                                            <i-col style="width: calc(100% - 46px);margin-left: 6px">
                                                <div class="card-title" v-text="child.title"></div>
                                                <div class="card-content" v-text="child.content"></div>
                                            </i-col>
                                        </Row>
                                    </Card>
                                    <div v-if="child.type==='qrcode'" slot="content">
                                        <div v-text="child.tip"></div>
                                        <div style="text-align: center">
                                            <img :src="'/api/v1/qrcode?url='+child.url">
                                        </div>
                                    </div>
                                </Tooltip>
                            </i-col>
                        </Row>
                        <div v-if="datas.length<=0" style="text-align: center;padding-top: 100px">
                            <div>
                                <Icon type="ios-folder-open-outline" size="170" />
                            </div>
                            <div style="font-size: 20px">没有任何数据</div>
                        </div>
                    </i-content>
                </Layout>
            </Layout>
        </div>
    </section>
</div>
<script type="text/javascript" th:if="${isIe}" th:src="@{/assets/js/babel.min.js}"></script>
<script type="text/javascript" th:if="${isIe}" th:src="@{/assets/js/polyfill.min.js}"></script>
<script type="text/javascript" th:src="@{/assets/lib/vue.min.js}"></script>
<script type="text/javascript" th:src="@{/assets/lib/iview/iview.min.js}"></script>
<script type="text/javascript" th:src="@{/assets/lib/axios.min.js}"></script>
<script th:type="${isIe?'text/babel':'text/javascript'}" charset="UTF-8" th:src="@{/assets/js/vue-utils.js}"></script>
<script th:type="${isIe?'text/babel':'text/javascript'}" charset="UTF-8" th:src="@{/assets/js/index.js}"></script>
</body>
</html>
